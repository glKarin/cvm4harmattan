<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML+RDFa 1.0//EN" "http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd">
<!-- saved from url=(0045)http://davy.preuveneers.be/phoneme/?q=node/35 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" version="XHTML+RDFa 1.0" dir="ltr" class="js"><head profile="http://www.w3.org/1999/xhtml/vocab"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
<meta name="Generator" content="Drupal 7 (http://drupal.org)">
<link rel="canonical" href="http://davy.preuveneers.be/phoneme/?q=node/35">
<link rel="shortlink" href="http://davy.preuveneers.be/phoneme/?q=node/35">
<meta name="MobileOptimized" content="width">
<meta name="HandheldFriendly" content="true">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="http://davy.preuveneers.be/phoneme/public/icon/duke.ico" type="image/vnd.microsoft.icon">
  <title>HowTo Build | phoneME for Windows CE, Windows Mobile and Android</title>
  <style type="text/css" media="all">
@import url("http://davy.preuveneers.be/phoneme/modules/system/system.base.css?p7sc6r");
@import url("http://davy.preuveneers.be/phoneme/modules/system/system.menus.css?p7sc6r");
@import url("http://davy.preuveneers.be/phoneme/modules/system/system.messages.css?p7sc6r");
@import url("http://davy.preuveneers.be/phoneme/modules/system/system.theme.css?p7sc6r");
</style>
<style type="text/css" media="all">
@import url("http://davy.preuveneers.be/phoneme/modules/comment/comment.css?p7sc6r");
@import url("http://davy.preuveneers.be/phoneme/modules/field/theme/field.css?p7sc6r");
@import url("http://davy.preuveneers.be/phoneme/modules/node/node.css?p7sc6r");
@import url("http://davy.preuveneers.be/phoneme/modules/search/search.css?p7sc6r");
@import url("http://davy.preuveneers.be/phoneme/modules/user/user.css?p7sc6r");
</style>
<style type="text/css" media="all">
@import url("http://davy.preuveneers.be/phoneme/sites/all/themes/skeletontheme/css/skeleton.css?p7sc6r");
@import url("http://davy.preuveneers.be/phoneme/sites/all/themes/skeletontheme/css/style.css?p7sc6r");
@import url("http://davy.preuveneers.be/phoneme/sites/all/themes/skeletontheme/css/buttons.css?p7sc6r");
@import url("http://davy.preuveneers.be/phoneme/sites/all/themes/skeletontheme/css/layout.css?p7sc6r");
@import url("http://davy.preuveneers.be/phoneme/sites/all/themes/skeletontheme/color/colors.css?p7sc6r");
</style>
  <script type="text/javascript" src="./HowTo Build _ phoneME for Windows CE, Windows Mobile and Android_files/jquery.js"></script>
<script type="text/javascript" src="./HowTo Build _ phoneME for Windows CE, Windows Mobile and Android_files/jquery.once.js"></script>
<script type="text/javascript" src="./HowTo Build _ phoneME for Windows CE, Windows Mobile and Android_files/drupal.js"></script>
<script type="text/javascript" src="./HowTo Build _ phoneME for Windows CE, Windows Mobile and Android_files/jquery.mobilemenu.js"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery(document).ready(function($) { 
	
	$("#navigation .content > ul").mobileMenu({
		prependTo: "#navigation",
		combine: false,
        switchWidth: 760,
        topOptionText: Drupal.settings.skeletontheme['topoptiontext']
	});
	
	});
//--><!]]>
</script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, {"basePath":"\/phoneme\/","pathPrefix":"","skeletontheme":{"topoptiontext":"Select a page"},"ajaxPageState":{"theme":"skeletontheme","theme_token":"WfQYV7Vo-mJT576n-hlhrSWHQgjAGQY5eevRGlMauA8","js":{"misc\/jquery.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"sites\/all\/themes\/skeletontheme\/js\/jquery.mobilemenu.js":1,"0":1},"css":{"modules\/system\/system.base.css":1,"modules\/system\/system.menus.css":1,"modules\/system\/system.messages.css":1,"modules\/system\/system.theme.css":1,"modules\/comment\/comment.css":1,"modules\/field\/theme\/field.css":1,"modules\/node\/node.css":1,"modules\/search\/search.css":1,"modules\/user\/user.css":1,"sites\/all\/themes\/skeletontheme\/css\/skeleton.css":1,"sites\/all\/themes\/skeletontheme\/css\/style.css":1,"sites\/all\/themes\/skeletontheme\/css\/buttons.css":1,"sites\/all\/themes\/skeletontheme\/css\/layout.css":1,"sites\/all\/themes\/skeletontheme\/color\/colors.css":1}}});
//--><!]]>
</script>
</head>
<body class="html not-front not-logged-in no-sidebars page-node page-node- page-node-35 node-type-page">
  <div id="skip-link">
    <a href="http://davy.preuveneers.be/phoneme/?q=node/35#main-content" class="element-invisible element-focusable">Skip to main content</a>
  </div>
    <div id="wrap">
    <div class="container">
        
                
        <div class="clear"></div>
        
        <!-- #header -->
                <div id="header" class="sixteen columns clearfix">   
                
            <div class="inner">
    
                                  <a href="http://davy.preuveneers.be/phoneme/" title="Home" rel="home" id="logo">
                    <img src="./HowTo Build _ phoneME for Windows CE, Windows Mobile and Android_files/logo2.png" alt="Home">
                  </a>
                                
                                <div id="name-and-slogan">
                
                                        <div id="site-name">
                    <a href="http://davy.preuveneers.be/phoneme/" title="Home" rel="home">phoneME for Windows CE, Windows Mobile and Android</a>
                    </div>
                                        
                                    
                </div>
                            </div>
        </div><!-- /#header -->
        
                
        <div class="clear"></div>
        
        <!-- #navigation -->
        <div id="navigation" class="sixteen columns clearfix">
        
            <div class="menu-header">
                            				<div class="content">
				<ul class="menu"><li class="first leaf"><a href="http://davy.preuveneers.be/phoneme/?q=node/33" title="phoneME for Windows CE/Mobile and Android">Home</a></li>
<li class="collapsed"><a href="http://davy.preuveneers.be/phoneme/?q=node/1" title="phoneME for Windows CE/Mobile">Windows CE/Mobile</a></li>
<li class="collapsed"><a href="http://davy.preuveneers.be/phoneme/?q=node/28" title="phoneME for Android">Android</a></li>
<li class="expanded active-trail"><a href="http://davy.preuveneers.be/phoneme/?q=node/34" title="phoneME for Maemo/MeeGo" class="active-trail">Maemo/MeeGo</a><ul class="menu"><li class="first leaf"><a href="http://davy.preuveneers.be/phoneme/?q=node/37" title="Feature Requests">Feature Requests</a></li>
<li class="last leaf active-trail"><a href="http://davy.preuveneers.be/phoneme/?q=node/35" title="HowTo Build" class="active-trail active">HowTo Build</a></li>
</ul></li>
<li class="leaf"><a href="http://davy.preuveneers.be/phoneme/?q=node/10" title="Downloads">Downloads</a></li>
<li class="collapsed"><a href="http://davy.preuveneers.be/phoneme/?q=node/13" title="Tips and Tricks">Tips and Tricks</a></li>
<li class="leaf"><a href="http://davy.preuveneers.be/phoneme/?q=node/20" title="Links">Links</a></li>
<li class="last leaf"><a href="http://davy.preuveneers.be/phoneme/?q=node/27" title="Frequently Asked Questions">FAQ</a></li>
</ul>                </div>
                        </div>
            
        </div><!-- /#navigation -->
        
                
                <div id="content" class="sixteen columns clearfix">    
                
                    
                            <div id="breadcrumb"><h2 class="element-invisible">You are here</h2><div class="breadcrumb"><a href="http://davy.preuveneers.be/phoneme/">Home</a><span class="sep">»</span><a href="http://davy.preuveneers.be/phoneme/?q=node/34" title="phoneME for Maemo/MeeGo">Maemo/MeeGo</a><span class="sep">»</span>HowTo Build</div></div>
                        
            <div id="main">
            
                                
                                
                                <h1 class="title" id="page-title">
                  HowTo Build                </h1>
                                
                                
                                <div class="tabs">
                                  </div>
                                
                                
                                
                  <div class="region region-content">
    <div id="block-system-main" class="block block-system">

    
  <div class="content">
    <div id="node-35" class="node node-page clearfix">

      
  
  <div class="content clearfix">
    <div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even"><h3>Requirements</h3>
<p>The following build instructions are intended for a linux based OS. My build system is Ubuntu 11.10 (both 32-bit and 64-bit<br>
should work). You need to have the following development tools for i686 or x64 installed:</p>
<ul><li>gcc, g++, make, openjdk-6-jdk, patch, subversion, autoconf, automake, tar, bzip2, gzip, libc6-dev
</li></ul><p>Download the ARM GNU/Linux EABI cross-compiler <a href="https://sourcery.mentor.com/sgpp/lite/arm/portal/package9728/public/arm-none-linux-gnueabi/arm-2011.09-70-arm-none-linux-gnueabi-i686-pc-linux-gnu.tar.bz2">arm-2011.09-70-arm-none-linux-gnueabi-i686-pc-linux-gnu.tar.bz2</a> and unpack it (as root) to /opt:<br><tt><br>
# mkdir -p /opt<br>
# tar xvfj /path/to/arm-2011.09-70-arm-none-linux-gnueabi-i686-pc-linux-gnu.tar.bz2 -C /opt<br></tt><br>
Download the <a href="http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-javase14-419411.html#j2sdk-1.4.2_19-oth-JPR">Java SE Development Kit 1.4.2_19</a> for Linux and unpack it (as root) to /opt:<br><tt><br>
# chmod a+x /path/to/j2sdk-1_4_2_19-linux-i586.bin<br>
# cd /opt<br>
# /path/to/j2sdk-1_4_2_19-linux-i586.bin<br></tt></p>
<h3>Download the phoneME sources</h3>
<p>Check out phoneME from the subversion repository with this script: <a href="http://davy.preuveneers.be/phoneme/public/maemo/scripts/checkout">checkout</a><br><tt><br>
  #!/bin/bash<br>
  mkdir -p /tmp/phoneme<br>
  cd /tmp/phoneme<br><br>
  svn checkout <a href="https://svn.java.net/svn/phoneme~svn/legal">https://svn.java.net/svn/phoneme~svn/legal</a> legal --username guest<br>
  for i in javacall pcsl midp cdc tools jpeg abstractions xmlparser restricted_crypto jsr172; do<br>
  &nbsp; &nbsp; &nbsp; svn checkout <a href="https://svn.java.net/svn/phoneme~svn/components/">https://svn.java.net/svn/phoneme~svn/components/</a>$i/trunk $i --username guest<br>
  done<br></tt><br>
Make sure you have about 600 MB of space available in /tmp before your run the script:<br><tt><br>
# cd /tmp<br>
# sh /path/to/checkout<br></tt></p>
<h3>Apply the patches</h3>
<p>Download the following patches: </p>
<ul><li><a href="http://davy.preuveneers.be/phoneme/public/maemo/patches/cdc.diff">cdc.diff</a>
</li><li><a href="http://davy.preuveneers.be/phoneme/public/maemo/patches/gnueabi.diff">gnueabi.diff</a>
</li><li><a href="http://davy.preuveneers.be/phoneme/public/maemo/patches/input.diff">input.diff</a>
</li><li><a href="http://davy.preuveneers.be/phoneme/public/maemo/patches/javacall.diff">javacall.diff</a>
</li><li><a href="http://davy.preuveneers.be/phoneme/public/maemo/patches/keymapping.diff">keymapping.diff</a>
</li><li><a href="http://davy.preuveneers.be/phoneme/public/maemo/patches/readkey.diff">readkey.diff</a>
</li><li><a href="http://davy.preuveneers.be/phoneme/public/maemo/patches/rms.diff">rms.diff</a>
</li><li><a href="http://davy.preuveneers.be/phoneme/public/maemo/patches/rotate.diff">rotate.diff</a>
</li><li><a href="http://davy.preuveneers.be/phoneme/public/maemo/patches/thread.diff">thread.diff</a>
</li><li><a href="http://davy.preuveneers.be/phoneme/public/maemo/patches/buildlib.diff">buildlib.diff</a>
</li><li><a href="http://davy.preuveneers.be/phoneme/public/maemo/patches/drawchars.diff">drawchars.diff</a>
</li><li><a href="http://davy.preuveneers.be/phoneme/public/maemo/patches/font.diff">font.diff</a>
</li><li><a href="http://davy.preuveneers.be/phoneme/public/maemo/patches/fbapp.diff">fbapp.diff</a>
</li><li><a href="http://davy.preuveneers.be/phoneme/public/maemo/patches/fbport.diff">fbport.diff</a>
</li><li><a href="http://davy.preuveneers.be/phoneme/public/maemo/patches/no_drag.diff">no_drag.diff</a>
</li><li><a href="http://davy.preuveneers.be/phoneme/public/maemo/patches/skinresources.diff">skinresources.diff</a>
</li><li><a href="http://davy.preuveneers.be/phoneme/public/maemo/patches/suite.diff">suite.diff</a>
</li><li><a href="http://davy.preuveneers.be/phoneme/public/maemo/patches/abstractions.diff">abstractions.diff</a>
</li><li><a href="http://davy.preuveneers.be/phoneme/public/maemo/patches/skin.diff">skin.diff</a>
</li><li><a href="http://davy.preuveneers.be/phoneme/public/maemo/patches/dateeditor.diff">dateeditor.diff</a>
</li></ul><p>If you prefer one big path, download this patch instead: <a href="http://davy.preuveneers.be/phoneme/public/maemo/patches/all.diff">all.diff</a></p>
<p>Apply them as follows:<br><tt><br>
# cd /tmp/phoneme<br>
# patch -p1 
</tt></p>
<h3>Add additional sources and packages</h3>
<p>Download the following archives: </p>
<ul><li><a href="http://davy.preuveneers.be/phoneme/public/maemo/addon/skin.tgz">skin.tgz</a>
</li><li><a href="http://davy.preuveneers.be/phoneme/public/maemo/addon/jsr75.tgz">jsr75.tgz</a>
</li><li><a href="http://davy.preuveneers.be/phoneme/public/maemo/addon/jsr179.tgz">jsr179.tgz</a>
</li><li><a href="http://davy.preuveneers.be/phoneme/public/maemo/addon/jsr135.tgz">jsr135.tgz</a>
</li></ul><p>Unpack them as follows:<br><tt><br>
# cd /tmp/phoneme<br>
# tar xvfz /path/to/xxx.tgz<br></tt></p>
<h3>Build the software</h3>
<p>Save the following script: <a href="http://davy.preuveneers.be/phoneme/public/maemo/scripts/build">build</a><br><tt><br>
#!/bin/bash<br>
export CVM_TARGET_TOOLS_PREFIX=/opt/arm-2011.09/bin/arm-none-linux-gnueabi-<br>
#export CVM_TARGET_TOOLS_PREFIX=/scratchbox/compilers/cs2007q3-glibc2.5-arm7/bin/arm-none-linux-gnueabi-<br>
export WORK_DIR=$PWD<br>
export JAVA_HOME=/opt/j2sdk1.4.2_19<br>
export JAVA_PATH=$JAVA_HOME<br>
export JDK_HOME=$JAVA_HOME<br>
export CVM_JAVABIN=$JAVA_HOME/bin<br>
export CVM_PRELOAD_LIB=true<br>
export JAVAME_LEGAL_DIR=$PWD/legal<br>
export PATH=$JAVA_HOME:$PATH<br>
export CVM_DEBUG=false<br>
export CVM_JIT=true<br>
export USE_AAPCS=true<br>
export J2ME_CLASSLIB=foundation<br>
export CVM_PRELOAD_LIB=true<br>
export USE_MIDP=true<br>
export USE_JPEG=true<br>
export CVM_DUAL_STACK=true<br>
export USE_JUMP=false<br>
export USE_CDC_FILE_PROTOCOL=false<br>
export ENABLE_ISOLATES=true<br>
export USE_MULTIPLE_ISOLATES=true<br>
export CVM_INCLUDE_COMMCONNECTION=true<br>
export CVM_INCLUDE_JAVACALL=false<br>
export USE_SSL=true<br>
export ABSTRACTIONS_DIR=$WORK_DIR/abstractions<br>
export JUMP_DIR=$WORK_DIR/jump<br>
export MIDP_DIR=$WORK_DIR/midp<br>
export PCSL_DIR=$WORK_DIR/pcsl<br>
export TOOLS_DIR=$WORK_DIR/tools<br>
export XMLPARSER_DIR=$WORK_DIR/xmlparser<br>
export JAVACALL_DIR=$WORK_DIR/javacall<br>
export RESTRICTED_CRYPTO_DIR=$WORK_DIR/restricted_crypto<br></tt><tt><br>
echo "CVM_TARGET_TOOLS_PREFIX=$CVM_TARGET_TOOLS_PREFIX" &gt;&gt; cdc/build/linux-arm-generic/GNUmakefile<br></tt><tt><br>
rm -rf tools/output<br>
cd cdc/build/linux-arm-generic<br>
make -f GNUmakefile bin VERBOSE_BUILD=true USE_VERBOSE_MAKE=true $@<br></tt></p>
<p>And run it in /tmp/phoneme:<br><tt><br>
# cd /tmp/phoneme<br>
# sh /path/to/build | tee build.log<br></tt></p>
<p>If the compilation succeeds, you can find the binaries zipped together into an archive located in the  /tmp/phoneme/cdc/install/ directory.<br>
Note there are several more build steps required before you can run midlets, but you could try to run the test application on your N900 device:<br><tt><br>
# bin/cvm -cp testclasses.zip Test<br></tt></p>
<p>This step is only meant to make sure you can produce proper binaries for the ARM platform. If the above test succeeds, you can immediately jump to the next step which is building cvm as a library.</p>
<h3>Optional JSR support</h3>
<p>To add support for JSR75, add the following parameters in the build script:<br><tt><br>
export USE_JSR_75=true<br>
export JSR_75_DIR=/tmp/phoneme/jsr75<br>
export JSR_75_PIM_HANDLER_IMPL=java<br></tt><br>
To add support for JSR179, add the following parameters:<br><tt><br>
export USE_JSR_179=true<br></tt><br>
To add support for JSR135, add the following parameters:<br><tt><br>
export USE_JSR_135=true<br></tt></p>
<h3>Build the libcvm.so library</h3>
<p>Run the <a href="http://davy.preuveneers.be/phoneme/public/maemo/scripts/build">build</a> script in /tmp/phoneme after setting the CVM_BUILD_SO environment variable:<br><tt><br>
# cd /tmp/phoneme<br>
# export CVM_BUILD_SO=true<br>
# sh /path/to/build | tee build2.log<br></tt></p>
<p>This should give you the libcvm.so library instead of the cvm binary in /tmp/phoneme/cdc/build/linux-arm-generic/bin/libcvm.so</p>
<h3>Build the custom Qt4-based cvm application</h3>
<p>Download these sources:</p>
<ul><li><a href="http://davy.preuveneers.be/phoneme/public/maemo/src/cvm-latest.src.tgz">cvm-latest.src.tgz</a>
</li></ul><p>Make sure you have the Maemo Madde utilities from the Qt SDK in your path, and build the sources with mad:<br><tt><br>
# export PATH=/opt/qtsdk/Maemo/4.6.2/bin:$PATH<br>
# mad make clean<br>
# mad qmake<br>
# mad make<br></tt></p>
<p>If you want to build the deb package, run<br><tt><br>
mad dpkg-buildpackage -b -r -uc -d<br></tt></p>
<p>Good luck!</p>
</div></div></div>  </div>

  
  
</div>
  </div>
</div>
  </div>
                                
            </div>
        
        </div><!-- /#content -->
        
                
        <div class="clear"></div>
        
                
	</div>
        
	<div id="footer">
        <div class="container">
        	<div class="sixteen columns clearfix">
        
                <div class="one_third">
                                </div>
                
                <div class="one_third">
                                </div>
                
                <div class="one_third last">
                                </div>
        
                <div class="clear"></div>
                
                  <div class="region region-footer">
    <div id="block-block-2" class="block block-block">

    
  <div class="content">
    <p>Copyright © 2007-2018 Davy Preuveneers. All Rights Reserved</p>
  </div>
</div>
  </div>
                
                <div class="clear"></div>
                
<!--
                <div id="credits">
                2018                                 phoneME for Windows CE, Windows Mobile and Android- This is a Free Drupal Theme<br/>
                                Ported to Drupal for the Open Source Community by <a href="http://www.drupalizing.com" target="_blank">Drupalizing</a>, a Project of <a href="http://www.morethanthemes.com" target="_blank">More than (just) Themes</a>. Original design by <a href="http://www.simplethemes.com/" target="_blank">Simple Themes</a>.
                </div>
-->
        	</div>
        </div>
    </div>
    
</div> <!-- /#wrap -->  

</body></html>